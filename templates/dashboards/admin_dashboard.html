{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<h2 class="mb-4">Admin Dashboard</h2>

<div class="row">
  <!-- Total Clients -->
  <div class="col-md-3 mb-3">
    <div class="card text-center p-3">
      <h5>Total Clients</h5>
      <h3 class="text-primary">{{ total_clients }}</h3>
    </div>
  </div>

  <!-- Total Sales (All Products) -->
  <div class="col-md-3 mb-3">
    <div class="card text-center p-3">
      <h5>Total Sales (This Month)</h5>
      <h3 class="text-success">â‚¹{{ total_sales }}</h3>
    </div>
  </div>

  <!-- Total Points -->
  <div class="col-md-3 mb-3">
    <div class="card text-center p-3">
      <h5>Total Points (This Month)</h5>
      <h3
        class="text-danger"
        id="points-counter"
        data-points="{{ total_points }}"
      >
        0
      </h3>
    </div>
  </div>
</div>

<!-- ðŸ”¹ Product-wise Sales Amounts -->
<hr class="my-4" />
<h4>Product-wise Sales (This Month)</h4>
<div class="row">
  <div class="col-md-2 mb-3">
    <div class="card text-center p-3">
      <h6>SIP</h6>
      <h5>â‚¹{{ sip_sales }}</h5>
    </div>
  </div>
  <div class="col-md-2 mb-3">
    <div class="card text-center p-3">
      <h6>Lumpsum</h6>
      <h5>â‚¹{{ lumsum_sales }}</h5>
    </div>
  </div>
  <div class="col-md-2 mb-3">
    <div class="card text-center p-3">
      <h6>Life Insurance</h6>
      <h5>â‚¹{{ life_sales }}</h5>
    </div>
  </div>
  <div class="col-md-2 mb-3">
    <div class="card text-center p-3">
      <h6>Health Insurance</h6>
      <h5>â‚¹{{ health_sales }}</h5>
    </div>
  </div>
  <div class="col-md-2 mb-3">
    <div class="card text-center p-3">
      <h6>Motor Insurance</h6>
      <h5>â‚¹{{ motor_sales }}</h5>
    </div>
  </div>
  <div class="col-md-2 mb-3">
    <div class="card text-center p-3">
      <h6>PMS</h6>
      <h5>â‚¹{{ pms_sales }}</h5>
    </div>
  </div>
</div>

<!-- ðŸ”¹ Points Counter Animation -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const counter = document.getElementById("points-counter");
    if (counter) {
      const target = parseFloat(counter.getAttribute("data-points")) || 0;
      let current = 0;
      const step = target / 50; // speed: 50 frames
      function animate() {
        current += step;
        if (current >= target) {
          counter.innerText = Math.round(target);
        } else {
          counter.innerText = Math.round(current);
          requestAnimationFrame(animate);
        }
      }
      animate();
    }
  });
</script>
{% endblock %}
